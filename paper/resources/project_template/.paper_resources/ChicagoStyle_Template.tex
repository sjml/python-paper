\documentclass[
    12pt,
    letterpaper,
    oneside$if(ragged)$$else$,
    noraggedright$endif$
]{turabian-researchpaper}

% Times Roman fonts
\usepackage{newtxtext}

$if(title)$
\title{$title$}
$endif$
$if(subtitle)$
\subtitle{$subtitle$}
$endif$
\author{$author$}

\usepackage[hyperfootnotes=false,hidelinks,unicode]{hyperref}
\hypersetup{
    $if(title)$pdftitle={$title$$if(subtitle)$: $subtitle$ $endif$},$endif$
    pdfauthor={$author$},
    pdflang={en-US},
    pdfcreator={},
    pdfproducer={$library_name$ v$library_version$},
}
% for nicer linebreak placements in URLs
\usepackage{xurl}

% page numbers centered in footer
\pagestyle{plain}

% images
\usepackage{graphicx}
\graphicspath{{../content/}} % image paths relative to content directory
% image aspect ratios stay correct, able to use [caption](./image.png){width=2in}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}

% tables
\usepackage{longtable}
\usepackage{booktabs}

% default tables are opulently tall
\let\oldlongtable\longtable
\def\longtable{\onehalfspacing\vspace{\baselineskip} \oldlongtable}

% captions should be centered and italicized
%% TODO: figure out how to work **with** the turabian-formatting
%%       package's caption stuf instead of fighting it.
\usepackage{caption}
\captionsetup{justification=centering,aboveskip={.5\baselineskip},belowskip={-0.5\baselineskip},font={it}}

% lists should be single-spaced
\let\oldenumerate\enumerate
\def\enumerate{\oldenumerate \singlespacing}
\let\olditemize\itemize
\def\itemize{\olditemize \singlespacing}

% tight lists
\makeatletter
\providecommand{\tightlist}{%
    \ifthenelse{\equal{\the\@listdepth}{1}}
    {}
    {\vspace{-\baselineskip}}
}
\makeatother

% tighter footnote spacing
\setlength{\footnotesep}{16.65pt}

% section headers are left-aligned and slightly larger font
\let\oldsection=\section
\renewcommand\section[1]{\oldsection{\large\raggedright{#1}}}
\let\oldsubsection=\subsection
\renewcommand\subsection[1]{\oldsubsection{\large\raggedright\emph{#1}}}
\let\oldsubsubsection=\subsubsection
\renewcommand\subsubsection[1]{\oldsubsubsection{\raggedright\emph{#1}}}

% standard bibliography environment taken from default pandoc template
%   except where noted
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newlength{\cslentryspacingunit}
\setlength{\cslentryspacingunit}{\parskip}
\newenvironment{CSLReferences}[2]
 {
\newpage % start on new page
\centerline{\underline{Works Cited}} % label it
 \setlength{\parindent}{0pt}
 \singlespacing
  \let\oldpar\par
  \def\par{\hangindent=\cslhangindent\oldpar}
  \setlength{\parskip}{1em}
 }
{
}
\usepackage{calc}
\newcommand{\CSLBlock}[1]{#1\hfill\break}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}\break}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}


% where the magic happens
\begin{document}
    \begin{center}

    \thispagestyle{empty}
    \vspace*{1in}
    \begin{singlespace}
    $if(title)$
    $title$$if(subtitle)$:\\
    $subtitle$$endif$
    $endif$
    \end{singlespace}
    \vspace{2in - \baselineskip}

    by
    \vspace{2in - \baselineskip}

    $author$

    \vspace{2in - \baselineskip}

    \singlespace{
        $if(professor)$$professor$ \\$endif$
        $if(class_mnemonic)$$class_mnemonic$$endif$$if(class_mnemonic)$$if(class_name)$ --- $endif$$endif$$if(class_name)$$class_name$$endif$ \\
        $if(date)$$date$$endif$
    }
    \end{center}
    \newpage
    \setcounter{page}{1}

$if(body)$$body$$else$\mbox{}$endif$

\end{document}
